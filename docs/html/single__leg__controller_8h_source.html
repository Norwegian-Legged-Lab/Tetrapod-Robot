<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tetrapod Project: catkin_ws/src/control/single_leg_controller/include/single_leg_controller/single_leg_controller.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo1.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tetrapod Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c9b1b03f6e45e6a48c8e8f7b0f905ad.html">catkin_ws</a></li><li class="navelem"><a class="el" href="dir_7c859f3878cb32062c29919224ce2290.html">src</a></li><li class="navelem"><a class="el" href="dir_d7dffebed82cce8cf49f9c429afefc35.html">control</a></li><li class="navelem"><a class="el" href="dir_39a6819a370204bd812b58f2230e8cf2.html">single_leg_controller</a></li><li class="navelem"><a class="el" href="dir_035ea556fec93070d4ef345493e98a39.html">include</a></li><li class="navelem"><a class="el" href="dir_04675d5335644a9203ea510d6d1f143b.html">single_leg_controller</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">single_leg_controller.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef single_leg_controller_h</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define single_leg_controller_h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// ROS</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;ros/ros.h&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;std_msgs/Empty.h&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;std_msgs/Bool.h&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;std_msgs/Float64.h&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;std_msgs/Float64MultiArray.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;sensor_msgs/JointState.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;eigen_conversions/eigen_msg.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Eigen</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;Eigen/Core&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// Standard Library</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// Kinematics</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;kinematics/kinematics.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// Utilities</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;filter_utils/filter_utils.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="classSingleLegController.html">   27</a></span>&#160;<span class="keyword">class </span><a class="code" href="classSingleLegController.html">SingleLegController</a></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classSingleLegController.html#a7334d4583d94d34addc8f7dc898fe5c7">   30</a></span>&#160;    <span class="keyword">public</span>: <span class="keyword">enum</span> <a class="code" href="classSingleLegController.html#a7334d4583d94d34addc8f7dc898fe5c7">GaitPhase</a> {stance = 1, swing = 2, uninitialized = 3};</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">    /*** Constructor/Destructor ***/</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keyword">public</span>: <a class="code" href="classSingleLegController.html#a8308336b28fb929f9b9b935aa8c0e710">SingleLegController</a>(<span class="keywordtype">double</span> _publish_frequency);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classSingleLegController.html#a173d75b4ce31036a360ffe231e950314">   38</a></span>&#160;    <span class="keyword">public</span>: <span class="keyword">virtual</span> <a class="code" href="classSingleLegController.html#a173d75b4ce31036a360ffe231e950314">~SingleLegController</a>(){};</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    /*** ROS FUNCTIONS ***/</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a82cbc4d3ae647d0929994edf00bba8dc">initROS</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#adfd046b154a005e93e5463c13f1ed5d6">generalizedCoordinatesCallback</a>(<span class="keyword">const</span> std_msgs::Float64MultiArrayConstPtr &amp;_msg);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#abce5e2d8277d3de86baeedddcad95a83">generalizedVelocitiesCallback</a>(<span class="keyword">const</span> std_msgs::Float64MultiArrayConstPtr &amp;_msg);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a66929d863702713ac5ebaefb0eed40e8">generalizedForcesCallback</a>(<span class="keyword">const</span> std_msgs::Float64MultiArrayConstPtr &amp;_msg);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">void</span> jointStateCallback(<span class="keyword">const</span> sensor_msgs::JointStatePtr &amp;_msg);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#ace838f549ab9d124d02ce4daa07bddf9">readyToProceedCallback</a>(<span class="keyword">const</span> std_msgs::Bool &amp;_msg);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">void</span> jointSetpointCallback(<span class="keyword">const</span> std_msgs::Float64MultiArrayConstPtr &amp;_msg);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">void</span> motorConfirmationCallback(<span class="keyword">const</span> std_msgs::Bool &amp;_msg);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">    /*** CONTROL FUNCTIONS ***/</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; calculateSwingLegHeightTrajectory(<span class="keywordtype">double</span> _percentage, <span class="keywordtype">double</span> _period, <span class="keywordtype">double</span> _max_swing_height, <span class="keywordtype">double</span> _hip_height);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">void</span> calculateSingleAxisTrajectory</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    (</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_percentage, </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_period, </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> &amp;_max_travel,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordtype">double</span> &amp;_axis_pos, </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordtype">double</span> &amp;_axis_vel, </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordtype">double</span> &amp;_axis_acc</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#aab175156b57045ba31d2048dde75ea9d">updateSwingFootPositionTrajectory</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a4546fd0c6d563f693c8a7217ee400626">updateStanceFootPositionTrajectory</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#ab981f262fd6959dea6432a238136e5ec">updateJointReferences</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#ad5b6382db1463b29715b6a0f11dc7253">updateJointTorqueCommands</a></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    (</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keyword">const</span> Eigen::Matrix&lt;double, 3, 1&gt; &amp;_joint_pos_ref,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keyword">const</span> Eigen::Matrix&lt;double, 3, 1&gt; &amp;_joint_vel_ref,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">const</span> Eigen::Matrix&lt;double, 3, 1&gt; &amp;_joint_acc_ref,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">const</span> Eigen::Matrix&lt;double, 3, 1&gt; &amp;_joint_pos,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">const</span> Eigen::Matrix&lt;double, 3, 1&gt; &amp;_joint_vel        </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#ad5b6382db1463b29715b6a0f11dc7253">updateJointTorqueCommands</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a3453715cb0120cdc1fb5f6494051f2bd">updateClosedLoopTorqueCommands</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a16531ceeb159200803bf59ac37134f71">updateJointVelocityCommands</a>(); </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a8cf90255f28a7ac48ae04f0d69e012ba">sendJointPositionCommands</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a8ac17a2799b0e20089e03d5bc1297ad7">sendJointVelocityCommands</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#acee61da82c06e1b45d9f9d3b14847747">sendJointTorqueCommands</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#acbab400d2767ed683ceaf3162d52c6e8">increaseIterator</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#ac8866042e708855270f78a0ebbc90721">updateGaitPhase</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a2751303302b0a0d937c3bcb768d92ad5">updateFootTrajectoryReference</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#a9082ad9153ed6666c5922caeb31613f4">updatePoseControlJointTrajectoryReference</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#aad9b3bce8878864bc100adea73b083ee">setPoseGoal</a>(Eigen::Matrix&lt;double, 3, 1&gt; _foot_pos);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a1ccb9a1cc0f8118faaef28229de335f1">setMotorGains</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#ac94137fdfe9b78dd3c47480341b9af47">moveFootToPosition</a>(Eigen::Matrix&lt;double, 3, 1&gt; _foot_goal_pos);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#ac4e4f7ee4fa05991e424b242d149afa3">moveJointsToSetpoints</a>();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#a3e2bc91ee5c0b1cde6ad9f8da033c83f">moveFootToNominalPosition</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">    /*** HELPER FUNCTIONS ***/</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#ad1dcb26e9bec916df129a00c2347b35b">checkForNewMessages</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classSingleLegController.html#af65cd13c9740c47df2e430a744361f85">  183</a></span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#af65cd13c9740c47df2e430a744361f85">readyToProceed</a>(){<span class="keywordflow">return</span> ready_to_proceed;}</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="classSingleLegController.html#a7bf974dae57964d754a2e4e1900903f1">  186</a></span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a7bf974dae57964d754a2e4e1900903f1">resetReadyToProceed</a>(){ready_to_proceed = <span class="keyword">false</span>;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#ae2d6915c29fbcb40f6ec20dc91229f69">isTargetPositionReached</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#aa7cfe14f25926f4870ea6628c3aee9f7">isJointVelocitySmall</a>(); </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">bool</span> <a class="code" href="classSingleLegController.html#a945a86bd3320c349b6fa027d27a79ff1">isInitialStateReceived</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a5f61e78b03357ff8fa62eb636108279a">printTorqueReferences</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a370642148f6c440f43f0c830c385e4bc">printSpatialTrajectories</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a1d5b3a6fcece39f3e78957fd0b8fc894">printJointTrajectories</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a26e0d5ba16c20c675d5316b0018b05b3">printAllStates</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">public</span>: <span class="keywordtype">void</span> <a class="code" href="classSingleLegController.html#a05e369f7eaf16b2d0cab0a1e79984fd2">writeToLog</a>();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="classSingleLegController.html#a139948fa97ac0f095f14ba49ddff018e">  215</a></span>&#160;    <span class="keyword">public</span>: <a class="code" href="classSingleLegController.html#a7334d4583d94d34addc8f7dc898fe5c7">GaitPhase</a> <a class="code" href="classSingleLegController.html#a139948fa97ac0f095f14ba49ddff018e">getGaitPhase</a>(){<span class="keywordflow">return</span> gait_phase;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">    /*** STATE VARIABLES ***/</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; foot_pos_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; foot_vel_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; foot_acc_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; foot_pos_goal = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_pos_goal = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_pos_initial = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_pos = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_vel = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_torque = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_pos_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_vel_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_acc_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_torque_ref = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_vel_commands = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 1&gt; joint_torque_commands = Eigen::Matrix&lt;double, 3, 1&gt;::Zero();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">private</span>: GaitPhase gait_phase = GaitPhase::stance;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">bool</span> ready_to_proceed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> current_iteration = 0;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> final_iteration = 400.0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> current_pose_iteration = 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> final_pose_iteration = 100;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">bool</span> gains_set = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">    /*** PARAMETERS ***/</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">int</span> NUMBER_OF_MOTORS = 3;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">double</span> UNINITIALIZED_STATE = 100.0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">double</span> POSITION_CONVERGENCE_CRITERIA = 0.01; <span class="comment">// Cirka 1 degree error for all joints</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">double</span> POSITION_COMMAND = 1.0;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">double</span> VELOCITY_COMMAND = 2.0;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">private</span>: <span class="keyword">const</span> <span class="keywordtype">double</span> TORQUE_COMMAND = 3.0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 3&gt; K_p = Eigen::Matrix&lt;double, 3, 3&gt;::Zero();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 3&gt; K_d = Eigen::Matrix&lt;double, 3, 3&gt;::Zero();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">private</span>: Eigen::Matrix&lt;double, 3, 3&gt; K_pos_error_vel_control = Eigen::Matrix&lt;double, 3, 3&gt;::Zero();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> publish_frequency = 200.0;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> phase_period = 0.5;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> hip_height = 0.35;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> x_nominal = 0.1;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> y_nominal = 0.3;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> x_step_distance = 0.2;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> y_step_distance = 0.0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> max_swing_height = 0.12; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> pose_period;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">private</span>: <span class="keywordtype">double</span> max_pose_vel = math_utils::degToRad(50);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">double</span> k_p_pos_hy;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordtype">double</span> k_i_pos_hy;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">double</span> k_p_pos_hp;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">double</span> k_i_pos_hp;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">double</span> k_p_pos_kp;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">double</span> k_i_pos_kp;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">double</span> k_p_vel_hy;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">double</span> k_i_vel_hy;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordtype">double</span> k_p_vel_hp;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">double</span> k_i_vel_hp;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">double</span> k_p_vel_kp;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordtype">double</span> k_i_vel_kp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordtype">double</span> k_p_torque_hy;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">double</span> k_i_torque_hy;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">double</span> k_p_torque_hp;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">double</span> k_i_torque_hp;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">double</span> k_p_torque_kp;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">double</span> k_i_torque_kp;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">    /*** ROS VARIABLES ***/</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">private</span>: std::unique_ptr&lt;ros::NodeHandle&gt; node_handle;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">private</span>: ros::Subscriber generalized_coordinates_subscriber;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">private</span>: ros::Subscriber generalized_velocities_subscriber;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keyword">private</span>: ros::Subscriber generalized_forces_subscriber;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keyword">private</span>: ros::Subscriber joint_state_subscriber;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keyword">private</span>: ros::Subscriber ready_to_proceed_subscriber;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">private</span>: ros::Subscriber joint_setpoint_subscriber;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keyword">private</span>: ros::Subscriber motor_confirmation_subscriber;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keyword">private</span>: ros::Publisher joint_state_publisher;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keyword">private</span>: ros::Publisher motor_gain_publisher;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">private</span>: sensor_msgs::JointState motor_command_msg;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">private</span>: ros::Publisher log_joint_states_publisher;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keyword">private</span>: sensor_msgs::JointState joint_state_log_msg;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keyword">private</span>: ros::Publisher log_joint_references_publisher;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keyword">private</span>: sensor_msgs::JointState joint_reference_log_msg;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">    /*** UTILITY VARIABLES ***/</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">private</span>: <a class="code" href="classKinematics.html">Kinematics</a> kinematics;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;};</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassSingleLegController_html_a3e2bc91ee5c0b1cde6ad9f8da033c83f"><div class="ttname"><a href="classSingleLegController.html#a3e2bc91ee5c0b1cde6ad9f8da033c83f">SingleLegController::moveFootToNominalPosition</a></div><div class="ttdeci">bool moveFootToNominalPosition()</div><div class="ttdoc">The function tries to move the foot to the nominal trajectory position.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:756</div></div>
<div class="ttc" id="aclassSingleLegController_html_ad1dcb26e9bec916df129a00c2347b35b"><div class="ttname"><a href="classSingleLegController.html#ad1dcb26e9bec916df129a00c2347b35b">SingleLegController::checkForNewMessages</a></div><div class="ttdeci">void checkForNewMessages()</div><div class="ttdoc">Function used to check if any new ROS messages has been received.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:826</div></div>
<div class="ttc" id="aclassSingleLegController_html_a3453715cb0120cdc1fb5f6494051f2bd"><div class="ttname"><a href="classSingleLegController.html#a3453715cb0120cdc1fb5f6494051f2bd">SingleLegController::updateClosedLoopTorqueCommands</a></div><div class="ttdeci">void updateClosedLoopTorqueCommands()</div><div class="ttdoc">A non model based torque controller.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:596</div></div>
<div class="ttc" id="aclassSingleLegController_html_ab981f262fd6959dea6432a238136e5ec"><div class="ttname"><a href="classSingleLegController.html#ab981f262fd6959dea6432a238136e5ec">SingleLegController::updateJointReferences</a></div><div class="ttdeci">void updateJointReferences()</div><div class="ttdoc">Update The joint trajectory reference based on the spatial foot trajectory.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:525</div></div>
<div class="ttc" id="aclassSingleLegController_html_adfd046b154a005e93e5463c13f1ed5d6"><div class="ttname"><a href="classSingleLegController.html#adfd046b154a005e93e5463c13f1ed5d6">SingleLegController::generalizedCoordinatesCallback</a></div><div class="ttdeci">void generalizedCoordinatesCallback(const std_msgs::Float64MultiArrayConstPtr &amp;_msg)</div><div class="ttdoc">Listens to joint angle messages from the simulated leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:194</div></div>
<div class="ttc" id="aclassSingleLegController_html_acbab400d2767ed683ceaf3162d52c6e8"><div class="ttname"><a href="classSingleLegController.html#acbab400d2767ed683ceaf3162d52c6e8">SingleLegController::increaseIterator</a></div><div class="ttdeci">void increaseIterator()</div><div class="ttdoc">Increment the gait cycle iterator. It stops iterating when the final iteration is reached.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:763</div></div>
<div class="ttc" id="aclassSingleLegController_html_a370642148f6c440f43f0c830c385e4bc"><div class="ttname"><a href="classSingleLegController.html#a370642148f6c440f43f0c830c385e4bc">SingleLegController::printSpatialTrajectories</a></div><div class="ttdeci">void printSpatialTrajectories()</div><div class="ttdoc">Print the foot trajectory reference.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:880</div></div>
<div class="ttc" id="aclassSingleLegController_html_a1ccb9a1cc0f8118faaef28229de335f1"><div class="ttname"><a href="classSingleLegController.html#a1ccb9a1cc0f8118faaef28229de335f1">SingleLegController::setMotorGains</a></div><div class="ttdeci">void setMotorGains()</div><div class="ttdoc">Tries to set the control gains in the motors. The function loops until it succeeds.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:924</div></div>
<div class="ttc" id="aclassSingleLegController_html_a1d5b3a6fcece39f3e78957fd0b8fc894"><div class="ttname"><a href="classSingleLegController.html#a1d5b3a6fcece39f3e78957fd0b8fc894">SingleLegController::printJointTrajectories</a></div><div class="ttdeci">void printJointTrajectories()</div><div class="ttdoc">Print the joint trajectory references.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:885</div></div>
<div class="ttc" id="aclassSingleLegController_html_a173d75b4ce31036a360ffe231e950314"><div class="ttname"><a href="classSingleLegController.html#a173d75b4ce31036a360ffe231e950314">SingleLegController::~SingleLegController</a></div><div class="ttdeci">virtual ~SingleLegController()</div><div class="ttdoc">Destructor.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:38</div></div>
<div class="ttc" id="aclassSingleLegController_html_ad5b6382db1463b29715b6a0f11dc7253"><div class="ttname"><a href="classSingleLegController.html#ad5b6382db1463b29715b6a0f11dc7253">SingleLegController::updateJointTorqueCommands</a></div><div class="ttdeci">void updateJointTorqueCommands()</div><div class="ttdoc">Overloaded function that uses the current joint references and joint states.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:553</div></div>
<div class="ttc" id="aclassSingleLegController_html_a16531ceeb159200803bf59ac37134f71"><div class="ttname"><a href="classSingleLegController.html#a16531ceeb159200803bf59ac37134f71">SingleLegController::updateJointVelocityCommands</a></div><div class="ttdeci">void updateJointVelocityCommands()</div><div class="ttdoc">Updates the joint velocity control commands based on the joint velocity reference and the joint posit...</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:548</div></div>
<div class="ttc" id="aclassSingleLegController_html_a9082ad9153ed6666c5922caeb31613f4"><div class="ttname"><a href="classSingleLegController.html#a9082ad9153ed6666c5922caeb31613f4">SingleLegController::updatePoseControlJointTrajectoryReference</a></div><div class="ttdeci">bool updatePoseControlJointTrajectoryReference()</div><div class="ttdoc">Update the pose control trajectory reference for the single leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:466</div></div>
<div class="ttc" id="aclassSingleLegController_html_a82cbc4d3ae647d0929994edf00bba8dc"><div class="ttname"><a href="classSingleLegController.html#a82cbc4d3ae647d0929994edf00bba8dc">SingleLegController::initROS</a></div><div class="ttdeci">void initROS()</div><div class="ttdoc">This function initilizes ROS.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:100</div></div>
<div class="ttc" id="aclassSingleLegController_html_acee61da82c06e1b45d9f9d3b14847747"><div class="ttname"><a href="classSingleLegController.html#acee61da82c06e1b45d9f9d3b14847747">SingleLegController::sendJointTorqueCommands</a></div><div class="ttdeci">void sendJointTorqueCommands()</div><div class="ttdoc">Updates the joint torque control commands based on the desired foot position.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:658</div></div>
<div class="ttc" id="aclassSingleLegController_html_a7334d4583d94d34addc8f7dc898fe5c7"><div class="ttname"><a href="classSingleLegController.html#a7334d4583d94d34addc8f7dc898fe5c7">SingleLegController::GaitPhase</a></div><div class="ttdeci">GaitPhase</div><div class="ttdoc">Gait phases.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:30</div></div>
<div class="ttc" id="aclassSingleLegController_html_a8cf90255f28a7ac48ae04f0d69e012ba"><div class="ttname"><a href="classSingleLegController.html#a8cf90255f28a7ac48ae04f0d69e012ba">SingleLegController::sendJointPositionCommands</a></div><div class="ttdeci">void sendJointPositionCommands()</div><div class="ttdoc">Sends a joint position commands to the motors.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:601</div></div>
<div class="ttc" id="aclassSingleLegController_html_af65cd13c9740c47df2e430a744361f85"><div class="ttname"><a href="classSingleLegController.html#af65cd13c9740c47df2e430a744361f85">SingleLegController::readyToProceed</a></div><div class="ttdeci">bool readyToProceed()</div><div class="ttdoc">Check whether or not a ready to proceed message has been received.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:183</div></div>
<div class="ttc" id="aclassSingleLegController_html_ac8866042e708855270f78a0ebbc90721"><div class="ttname"><a href="classSingleLegController.html#ac8866042e708855270f78a0ebbc90721">SingleLegController::updateGaitPhase</a></div><div class="ttdeci">bool updateGaitPhase()</div><div class="ttdoc">Increments the gait cycle iterator and updates the leg state.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:775</div></div>
<div class="ttc" id="aclassSingleLegController_html_a26e0d5ba16c20c675d5316b0018b05b3"><div class="ttname"><a href="classSingleLegController.html#a26e0d5ba16c20c675d5316b0018b05b3">SingleLegController::printAllStates</a></div><div class="ttdeci">void printAllStates()</div><div class="ttdoc">Print various information about all joints.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:890</div></div>
<div class="ttc" id="aclassSingleLegController_html_aa7cfe14f25926f4870ea6628c3aee9f7"><div class="ttname"><a href="classSingleLegController.html#aa7cfe14f25926f4870ea6628c3aee9f7">SingleLegController::isJointVelocitySmall</a></div><div class="ttdeci">bool isJointVelocitySmall()</div><div class="ttdoc">Checks if the sum of squared joint velocities are smaller than a certain threshold.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:848</div></div>
<div class="ttc" id="aclassSingleLegController_html_a66929d863702713ac5ebaefb0eed40e8"><div class="ttname"><a href="classSingleLegController.html#a66929d863702713ac5ebaefb0eed40e8">SingleLegController::generalizedForcesCallback</a></div><div class="ttdeci">void generalizedForcesCallback(const std_msgs::Float64MultiArrayConstPtr &amp;_msg)</div><div class="ttdoc">Listens to joint force messages from the simulated leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:214</div></div>
<div class="ttc" id="aclassSingleLegController_html"><div class="ttname"><a href="classSingleLegController.html">SingleLegController</a></div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:27</div></div>
<div class="ttc" id="aclassSingleLegController_html_aab175156b57045ba31d2048dde75ea9d"><div class="ttname"><a href="classSingleLegController.html#aab175156b57045ba31d2048dde75ea9d">SingleLegController::updateSwingFootPositionTrajectory</a></div><div class="ttdeci">void updateSwingFootPositionTrajectory()</div><div class="ttdoc">Update the swing foot trajectory for the leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:315</div></div>
<div class="ttc" id="aclassSingleLegController_html_ac4e4f7ee4fa05991e424b242d149afa3"><div class="ttname"><a href="classSingleLegController.html#ac4e4f7ee4fa05991e424b242d149afa3">SingleLegController::moveJointsToSetpoints</a></div><div class="ttdeci">bool moveJointsToSetpoints()</div><div class="ttdoc">The function tries to move the foot to the foot position given by the input parameters.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:751</div></div>
<div class="ttc" id="aclassSingleLegController_html_ace838f549ab9d124d02ce4daa07bddf9"><div class="ttname"><a href="classSingleLegController.html#ace838f549ab9d124d02ce4daa07bddf9">SingleLegController::readyToProceedCallback</a></div><div class="ttdeci">void readyToProceedCallback(const std_msgs::Bool &amp;_msg)</div><div class="ttdoc">The ready_to_proceed parameter is changed based on the incomming message.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:239</div></div>
<div class="ttc" id="aclassKinematics_html"><div class="ttname"><a href="classKinematics.html">Kinematics</a></div><div class="ttdoc">A class for analytical Kinematics Solving.</div><div class="ttdef"><b>Definition:</b> kinematics.h:53</div></div>
<div class="ttc" id="aclassSingleLegController_html_a945a86bd3320c349b6fa027d27a79ff1"><div class="ttname"><a href="classSingleLegController.html#a945a86bd3320c349b6fa027d27a79ff1">SingleLegController::isInitialStateReceived</a></div><div class="ttdeci">bool isInitialStateReceived()</div><div class="ttdoc">Check if the uninitalized joint state of the robot has been overridden by measurements.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:862</div></div>
<div class="ttc" id="aclassSingleLegController_html_abce5e2d8277d3de86baeedddcad95a83"><div class="ttname"><a href="classSingleLegController.html#abce5e2d8277d3de86baeedddcad95a83">SingleLegController::generalizedVelocitiesCallback</a></div><div class="ttdeci">void generalizedVelocitiesCallback(const std_msgs::Float64MultiArrayConstPtr &amp;_msg)</div><div class="ttdoc">Listens to joint velocity messages from the simulated leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:204</div></div>
<div class="ttc" id="aclassSingleLegController_html_ae2d6915c29fbcb40f6ec20dc91229f69"><div class="ttname"><a href="classSingleLegController.html#ae2d6915c29fbcb40f6ec20dc91229f69">SingleLegController::isTargetPositionReached</a></div><div class="ttdeci">bool isTargetPositionReached()</div><div class="ttdoc">Check if the squared error between the current joint angles and target joint angles is smaller than s...</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:831</div></div>
<div class="ttc" id="aclassSingleLegController_html_a8ac17a2799b0e20089e03d5bc1297ad7"><div class="ttname"><a href="classSingleLegController.html#a8ac17a2799b0e20089e03d5bc1297ad7">SingleLegController::sendJointVelocityCommands</a></div><div class="ttdeci">void sendJointVelocityCommands()</div><div class="ttdoc">Updates the joint velocity commands and send them to the motors.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:634</div></div>
<div class="ttc" id="aclassSingleLegController_html_a4546fd0c6d563f693c8a7217ee400626"><div class="ttname"><a href="classSingleLegController.html#a4546fd0c6d563f693c8a7217ee400626">SingleLegController::updateStanceFootPositionTrajectory</a></div><div class="ttdeci">void updateStanceFootPositionTrajectory()</div><div class="ttdoc">Update the stance foot tractory for the leg.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:367</div></div>
<div class="ttc" id="aclassSingleLegController_html_a2751303302b0a0d937c3bcb768d92ad5"><div class="ttname"><a href="classSingleLegController.html#a2751303302b0a0d937c3bcb768d92ad5">SingleLegController::updateFootTrajectoryReference</a></div><div class="ttdeci">void updateFootTrajectoryReference()</div><div class="ttdoc">Update the foot trajectory based on the leg state.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:804</div></div>
<div class="ttc" id="aclassSingleLegController_html_ac94137fdfe9b78dd3c47480341b9af47"><div class="ttname"><a href="classSingleLegController.html#ac94137fdfe9b78dd3c47480341b9af47">SingleLegController::moveFootToPosition</a></div><div class="ttdeci">bool moveFootToPosition(Eigen::Matrix&lt; double, 3, 1 &gt; _foot_goal_pos)</div><div class="ttdoc">Creates a trajectory from the current foot position to the goal foot position and moves the foot to t...</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:682</div></div>
<div class="ttc" id="aclassSingleLegController_html_a139948fa97ac0f095f14ba49ddff018e"><div class="ttname"><a href="classSingleLegController.html#a139948fa97ac0f095f14ba49ddff018e">SingleLegController::getGaitPhase</a></div><div class="ttdeci">GaitPhase getGaitPhase()</div><div class="ttdoc">Return the leg's phase state.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:215</div></div>
<div class="ttc" id="aclassSingleLegController_html_a5f61e78b03357ff8fa62eb636108279a"><div class="ttname"><a href="classSingleLegController.html#a5f61e78b03357ff8fa62eb636108279a">SingleLegController::printTorqueReferences</a></div><div class="ttdeci">void printTorqueReferences()</div><div class="ttdoc">Print the joint torque references.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:875</div></div>
<div class="ttc" id="aclassSingleLegController_html_a05e369f7eaf16b2d0cab0a1e79984fd2"><div class="ttname"><a href="classSingleLegController.html#a05e369f7eaf16b2d0cab0a1e79984fd2">SingleLegController::writeToLog</a></div><div class="ttdeci">void writeToLog()</div><div class="ttdoc">Write the joint references and estimated states to the log.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:901</div></div>
<div class="ttc" id="aclassSingleLegController_html_a7bf974dae57964d754a2e4e1900903f1"><div class="ttname"><a href="classSingleLegController.html#a7bf974dae57964d754a2e4e1900903f1">SingleLegController::resetReadyToProceed</a></div><div class="ttdeci">void resetReadyToProceed()</div><div class="ttdoc">Set the ready_to_proceed flag to false.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.h:186</div></div>
<div class="ttc" id="aclassSingleLegController_html_a8308336b28fb929f9b9b935aa8c0e710"><div class="ttname"><a href="classSingleLegController.html#a8308336b28fb929f9b9b935aa8c0e710">SingleLegController::SingleLegController</a></div><div class="ttdeci">SingleLegController(double _publish_frequency)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:3</div></div>
<div class="ttc" id="aclassSingleLegController_html_aad9b3bce8878864bc100adea73b083ee"><div class="ttname"><a href="classSingleLegController.html#aad9b3bce8878864bc100adea73b083ee">SingleLegController::setPoseGoal</a></div><div class="ttdeci">void setPoseGoal(Eigen::Matrix&lt; double, 3, 1 &gt; _foot_pos)</div><div class="ttdoc">Set the final and initial states for pose control trajectories.</div><div class="ttdef"><b>Definition:</b> single_leg_controller.cpp:428</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
