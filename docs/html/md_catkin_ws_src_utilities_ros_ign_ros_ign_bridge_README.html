<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tetrapod Project: Bridge communication between ROS and Ignition Transport</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo1.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tetrapod Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Bridge communication between ROS and Ignition Transport </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package provides a network bridge which enables the exchange of messages between ROS and Ignition Transport.</p>
<p>The bridge is currently implemented in C++. At this point there's no support for service calls. Its support is limited to only the following message types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ROS type </th><th class="markdownTableHeadCenter">Ignition Transport type  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">std_msgs/Bool </td><td class="markdownTableBodyCenter">ignition::msgs::Boolean  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">std_msgs/Empty </td><td class="markdownTableBodyCenter">ignition::msgs::Empty  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">std_msgs/Float32 </td><td class="markdownTableBodyCenter">ignition::msgs::Float  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">std_msgs/Float64 </td><td class="markdownTableBodyCenter">ignition::msgs::Double  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">std_msgs/Header </td><td class="markdownTableBodyCenter">ignition::msgs::Header  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">std_msgs/String </td><td class="markdownTableBodyCenter">ignition::msgs::StringMsg  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">geometry_msgs/Quaternion </td><td class="markdownTableBodyCenter">ignition::msgs::Quaternion  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">geometry_msgs/Vector3 </td><td class="markdownTableBodyCenter">ignition::msgs::Vector3d  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">geometry_msgs/Point </td><td class="markdownTableBodyCenter">ignition::msgs::Vector3d  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">geometry_msgs/Pose </td><td class="markdownTableBodyCenter">ignition::msgs::Pose  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">geometry_msgs/PoseStamped </td><td class="markdownTableBodyCenter">ignition::msgs::Pose  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">geometry_msgs/Transform </td><td class="markdownTableBodyCenter">ignition::msgs::Pose  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">geometry_msgs/TransformStamped </td><td class="markdownTableBodyCenter">ignition::msgs::Pose  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">geometry_msgs/Twist </td><td class="markdownTableBodyCenter">ignition::msgs::Twist  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">mav_msgs/Actuators (<a href="https://github.com/ethz-asl/mav_comm/issues/86">not on Noetic</a>) </td><td class="markdownTableBodyCenter">ignition::msgs::Actuators  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">nav_msgs/Odometry </td><td class="markdownTableBodyCenter">ignition::msgs::Odometry  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">rosgraph_msgs/Clock </td><td class="markdownTableBodyCenter">ignition::msgs::Clock  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sensor_msgs/BatteryState </td><td class="markdownTableBodyCenter">ignition::msgs::BatteryState  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sensor_msgs/CameraInfo </td><td class="markdownTableBodyCenter">ignition::msgs::CameraInfo  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sensor_msgs/FluidPressure </td><td class="markdownTableBodyCenter">ignition::msgs::FluidPressure  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sensor_msgs/Imu </td><td class="markdownTableBodyCenter">ignition::msgs::IMU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sensor_msgs/Image </td><td class="markdownTableBodyCenter">ignition::msgs::Image  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sensor_msgs/JointState </td><td class="markdownTableBodyCenter">ignition::msgs::Model  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sensor_msgs/LaserScan </td><td class="markdownTableBodyCenter">ignition::msgs::LaserScan  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sensor_msgs/MagneticField </td><td class="markdownTableBodyCenter">ignition::msgs::Magnetometer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sensor_msgs/PointCloud2 </td><td class="markdownTableBodyCenter">ignition::msgs::PointCloudPacked  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">tf_msgs/TFMessage </td><td class="markdownTableBodyCenter">ignition::msgs::Pose_V  </td></tr>
</table>
<p>Run <code>rosmaster &amp; rosrun ros_ign_bridge parameter_bridge -h</code> for instructions.</p>
<h1><a class="anchor" id="autotoc_md104"></a>
Example 1a: Ignition Transport talker and ROS listener</h1>
<p>First we start a ROS <code>roscore</code>:</p>
<div class="fragment"><div class="line"># Shell A:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">roscore</div>
</div><!-- fragment --><p>Then we start the parameter bridge which will watch the specified topics.</p>
<div class="fragment"><div class="line"># Shell B:</div>
<div class="line">. ~/bridge_ws/install/setup.bash</div>
<div class="line">rosrun ros_ign_bridge parameter_bridge /chatter@std_msgs/String@ignition.msgs.StringMsg</div>
</div><!-- fragment --><p>Now we start the ROS listener.</p>
<div class="fragment"><div class="line"># Shell C:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">rostopic echo /chatter</div>
</div><!-- fragment --><p>Now we start the Ignition Transport talker.</p>
<div class="fragment"><div class="line"># Shell D:</div>
<div class="line">ign topic pub -t /chatter -m ignition.msgs.StringMsg -p &#39;data:&quot;Hello&quot;&#39;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md105"></a>
Example 1b: ROS talker and Ignition Transport listener</h1>
<p>First we start a ROS <code>roscore</code>:</p>
<div class="fragment"><div class="line"># Shell A:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">roscore</div>
</div><!-- fragment --><p>Then we start the parameter bridge which will watch the specified topics.</p>
<div class="fragment"><div class="line"># Shell B:</div>
<div class="line">. ~/bridge_ws/install/setup.bash</div>
<div class="line">rosrun ros_ign_bridge parameter_bridge /chatter@std_msgs/String@ignition.msgs.StringMsg</div>
</div><!-- fragment --><p>Now we start the Ignition Transport listener.</p>
<div class="fragment"><div class="line"># Shell C:</div>
<div class="line">ign topic -e -t /chatter</div>
</div><!-- fragment --><p>Now we start the ROS talker.</p>
<div class="fragment"><div class="line"># Shell D:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">rostopic pub /chatter std_msgs/String &quot;data: &#39;Hi&#39;&quot; --once</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md106"></a>
Example 2: Run the bridge and exchange images</h1>
<p>In this example, we're going to generate Ignition Transport images using Gazebo, that will be converted into ROS images, and visualized with <code>rqt_viewer</code>.</p>
<p>First we start a ROS <code>roscore</code>:</p>
<div class="fragment"><div class="line"># Shell A:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">roscore</div>
</div><!-- fragment --><p>Then we start Gazebo.</p>
<div class="fragment"><div class="line"># Shell B:</div>
<div class="line">gazebo</div>
</div><!-- fragment --><p>Once Gazebo is running, click on the <code>Insert</code> tab, and then, insert a <code>Camera</code> object into the scene. Now, let's see the topic where the camera images are published.</p>
<div class="fragment"><div class="line"># Shell C:</div>
<div class="line">ign topic -l | grep image</div>
<div class="line">/default/camera/link/camera/image</div>
</div><!-- fragment --><p>Then we start the parameter bridge with the previous topic.</p>
<div class="fragment"><div class="line"># Shell D:</div>
<div class="line">. ~/bridge_ws/install/setup.bash</div>
<div class="line">rosrun ros_ign_bridge parameter_bridge /default/camera/link/camera/image@sensor_msgs/Image@ignition.msgs.Image</div>
</div><!-- fragment --><p>Now we start the ROS GUI:</p>
<div class="fragment"><div class="line"># Shell E:</div>
<div class="line">. /opt/ros/noetic/setup.bash</div>
<div class="line">rqt_image_view /default/camera/link/camera/image</div>
</div><!-- fragment --><p>You should see the current images in <code>rqt_image_view</code> which are coming from Gazebo (published as Ignition Msgs over Ignition Transport).</p>
<p>The screenshot shows all the shell windows and their expected content (it was taken using ROS Kinetic):</p>
<p><img src="images/bridge_image_exchange.png" alt="Ignition Transport images and ROS rqt" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
