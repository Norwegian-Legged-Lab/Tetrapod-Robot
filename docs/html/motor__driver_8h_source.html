<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tetrapod Project: Arduino/libraries/motor_driver/motor_driver.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo1.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tetrapod Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a991eec27578c865874ede3d8ec657c2.html">Arduino</a></li><li class="navelem"><a class="el" href="dir_481cc946b8a81b8d9363a4aad6201160.html">libraries</a></li><li class="navelem"><a class="el" href="dir_24900cfa9e09bb4174be1b800b035ede.html">motor_driver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">motor_driver.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef motor_driver_h</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define motor_driver_h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;motor_constants.h&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;config_motor_driver.h&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;teensy_can_ports.h&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;make_can_msg.h&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;FlexCAN_T4.h&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;utilities.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;Arduino.h&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="classMotorControl.html">   13</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMotorControl.html">MotorControl</a></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="classMotorControl.html#a56ef29cfa725b1ceebd63722f67cc94f">   17</a></span>&#160;    <a class="code" href="classMotorControl.html#a56ef29cfa725b1ceebd63722f67cc94f">MotorControl</a>(){}</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="classMotorControl.html#a56ef29cfa725b1ceebd63722f67cc94f">MotorControl</a>(uint8_t _id, uint8_t _can_port_id, <span class="keywordtype">int</span> _number_of_inner_motor_rotations, <span class="keywordtype">double</span> _position_offset);</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#a63731c651017af16698e47ba486d08e9">readPIDParameters</a>();</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#a7583db8b9d31d9598b7163cce2e906a4">writePIDParametersToRAM</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    (</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordtype">double</span> _kp_pos,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordtype">double</span> _ki_pos,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordtype">double</span> _kp_speed,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordtype">double</span> _ki_speed,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordtype">double</span> _kp_torque,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordtype">double</span> _ki_torque</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    ); </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#acfa6eac860b643239260c19b59f4a153">setPositionReference</a>(<span class="keywordtype">double</span> _angle);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a08463c3ab6e6212260dbb33e67b4865b">setSpeedReference</a>(<span class="keywordtype">double</span> _speed);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#adb120e50c64bba7173d2f564c4b4c385">setTorqueReference</a>(<span class="keywordtype">double</span> _torque);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a4557833d4596993cdbec55f211b2b812">setTorqueCurrent</a>(<span class="keywordtype">int</span> _torque_current);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a4c7b6656a49ee1a9234774f940c732f1">readMotorControlCommandReply</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* _can_message);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#a1c0295d88d6a8815f2f9ce6f5e6cbd38">stopMotor</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#a13f483eb3198db500e17fd3225cbf30c">turnOffMotor</a>();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#adbf876096b52138e3d4d2cd3f5a2c719">readMultiTurnAngle</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#a2aa2f8082ecae25915cbe2e555ebd31b">readMotorStatus</a>();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a88d6ab604e8aceb0aad702ebed96cb7a">requestMotorStatus</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classMotorControl.html#ab7e8ee7dac639918e2e6474a3dffbcfe">readCompleteEncoderPosition</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// TODO change to camelcase - also in related functions</span></div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classMotorControl.html#a962aad2e5369e531efd9c4c78a127d38">  101</a></span>&#160;<span class="comment"></span>    uint8_t <a class="code" href="classMotorControl.html#a962aad2e5369e531efd9c4c78a127d38">get_id</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a51647c6042d70555a27f21041286f5ec">id</a>;}</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classMotorControl.html#a3da82ed2c8591aefb2f9a5ac2f2d3fca">  105</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a3da82ed2c8591aefb2f9a5ac2f2d3fca">getPosition</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a9da1555bc82e0dc764d0007330f2e14f">position</a>;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classMotorControl.html#a51f8529942ac9d799b3283209e8bc8c4">  109</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a51f8529942ac9d799b3283209e8bc8c4">getVelocity</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a75730853edf97afa2d2abd864311241e">speed</a>;}</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classMotorControl.html#a09cfe7f082888628e7b51d0111f238bc">  113</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a09cfe7f082888628e7b51d0111f238bc">getTorque</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a6396658604728af128c5b7565f8ec2ae">torque</a>;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classMotorControl.html#ab21093a91fa72b1efa8cdffdbc5728b6">  117</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#ab21093a91fa72b1efa8cdffdbc5728b6">getEncoderValue</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a311a925139985e93eb2f846beafaeb8b">previous_encoder_value</a>;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classMotorControl.html#a6a3b6d27d44ed6f218caa621f0a952ef">  121</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a6a3b6d27d44ed6f218caa621f0a952ef">getMultiTurnAngle</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#aecfb789964ebaef009a70f6822d4b06a">multi_turn_angle_32_bit</a>;}</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="classMotorControl.html#a20f66502c3c3f2cf48ab0a747dc4757c">  124</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a20f66502c3c3f2cf48ab0a747dc4757c">getMultiTurnAngleRaw</a>(){<span class="keywordflow">return</span> <a class="code" href="classMotorControl.html#a2cddfc70767cf167aae07b334e51c724">multi_turn_angle_001lsb</a>;}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a8efb1d05019a36428d8d357a9b011271">getPIDParameters</a>(</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordtype">double</span> &amp;_kp_pos,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordtype">double</span> &amp;_ki_pos,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordtype">double</span> &amp;_kp_speed,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordtype">double</span> &amp;_ki_speed,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">double</span> &amp;_kp_torque,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordtype">double</span> &amp;_ki_torque);  </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#a2633c618cd6b5caa204108b5b94dc4a0">printPIDParameters</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#adadf296d7e829eae4990f3c940c12223">printState</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">void</span> printTorqueCurrents();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">double</span> raw_position_reference;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classMotorControl.html#a51647c6042d70555a27f21041286f5ec">  153</a></span>&#160;    uint8_t <a class="code" href="classMotorControl.html#a51647c6042d70555a27f21041286f5ec">id</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classMotorControl.html#a2125bf85610e5642c9b96cf6ecb7e9ad">  156</a></span>&#160;    uint16_t <a class="code" href="classMotorControl.html#a2125bf85610e5642c9b96cf6ecb7e9ad">address</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classMotorControl.html#a474dd24a88e301185058d5bd00b6eabf">  159</a></span>&#160;    uint8_t <a class="code" href="classMotorControl.html#a474dd24a88e301185058d5bd00b6eabf">can_port_id</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classMotorControl.html#af53ad784bf80625139c387b3ccd0ff10">  162</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#af53ad784bf80625139c387b3ccd0ff10">kp_pos</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">double</span> ki_pos;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">double</span> kp_speed;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">double</span> ki_speed;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">double</span> kp_torque;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">double</span> ki_torque;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classMotorControl.html#a05a3cfe598ada9c9c45d8cbdedfd6612">  171</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a05a3cfe598ada9c9c45d8cbdedfd6612">initial_number_of_inner_motor_rotations</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classMotorControl.html#a41853f47391578f88397c82f476c201b">  175</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a41853f47391578f88397c82f476c201b">number_of_inner_motor_rotations</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classMotorControl.html#a311a925139985e93eb2f846beafaeb8b">  179</a></span>&#160;    uint16_t <a class="code" href="classMotorControl.html#a311a925139985e93eb2f846beafaeb8b">previous_encoder_value</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classMotorControl.html#aecfb789964ebaef009a70f6822d4b06a">  182</a></span>&#160;    int32_t <a class="code" href="classMotorControl.html#aecfb789964ebaef009a70f6822d4b06a">multi_turn_angle_32_bit</a> = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classMotorControl.html#a936a278d8cd0b63eb97c50427188e685">  185</a></span>&#160;    int32_t <a class="code" href="classMotorControl.html#a936a278d8cd0b63eb97c50427188e685">multi_turn_angle_32_bit_001lsb</a> = 0;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classMotorControl.html#ab3de59f6f96640c0e3cd08b5bd596734">  188</a></span>&#160;    int64_t <a class="code" href="classMotorControl.html#ab3de59f6f96640c0e3cd08b5bd596734">multi_turn_angle_64_bit</a> = 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="classMotorControl.html#a2cddfc70767cf167aae07b334e51c724">  191</a></span>&#160;    int64_t <a class="code" href="classMotorControl.html#a2cddfc70767cf167aae07b334e51c724">multi_turn_angle_001lsb</a> = 0;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// This parameters keeps track of whether or not this is the case.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classMotorControl.html#a3e3595d03a4b8c3dba2ba4e5f94d6144">  196</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a3e3595d03a4b8c3dba2ba4e5f94d6144">target_position_offset</a> = 0.0;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classMotorControl.html#aad902c2afe2cc8dc4392c1842ef6034e">  199</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#aad902c2afe2cc8dc4392c1842ef6034e">position_offset</a> = 0.0;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="classMotorControl.html#a65ff777ee56a7ace4cea498b36385a0c">  202</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a65ff777ee56a7ace4cea498b36385a0c">position_center_offset</a> = M_PI/6.0; <span class="comment">//M_PI/6.0;</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classMotorControl.html#a9da1555bc82e0dc764d0007330f2e14f">  205</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a9da1555bc82e0dc764d0007330f2e14f">position</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="classMotorControl.html#a75730853edf97afa2d2abd864311241e">  208</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a75730853edf97afa2d2abd864311241e">speed</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classMotorControl.html#a6396658604728af128c5b7565f8ec2ae">  211</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a6396658604728af128c5b7565f8ec2ae">torque</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="classMotorControl.html#a3d447b2ebd86ee5f49444afebdabdf6f">  214</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a3d447b2ebd86ee5f49444afebdabdf6f">temperature</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classMotorControl.html#a5dcdf944c68fbe8dc880b33c791656bb">  217</a></span>&#160;    int16_t <a class="code" href="classMotorControl.html#a5dcdf944c68fbe8dc880b33c791656bb">torque_current_reference</a> = 0;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    </div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="classMotorControl.html#a116a0c4dfb6303eb3707965137bf820a">  220</a></span>&#160;    int16_t <a class="code" href="classMotorControl.html#a116a0c4dfb6303eb3707965137bf820a">torque_current_measured</a> = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classMotorControl.html#a220532d2dcb7e358243fb4012dd93d34">  224</a></span>&#160;    CAN_message_t <a class="code" href="classMotorControl.html#a220532d2dcb7e358243fb4012dd93d34">can_message</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classMotorControl.html#abd056f19e63f8d8a3371c301158a8f73">  227</a></span>&#160;    CAN_message_t <a class="code" href="classMotorControl.html#abd056f19e63f8d8a3371c301158a8f73">received_can_message</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">// Motor specific parameters</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="classMotorControl.html#a1f03efb175fcd3bbf8e21d7083f09c5b">  233</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a1f03efb175fcd3bbf8e21d7083f09c5b">max_torque</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="classMotorControl.html#a5b5f94cd2aea557488360b839ce01f8e">  237</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classMotorControl.html#a5b5f94cd2aea557488360b839ce01f8e">max_torque_current</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="classMotorControl.html#afcc84762a4744b5f584403a6a3504d7e">  241</a></span>&#160;    uint16_t <a class="code" href="classMotorControl.html#afcc84762a4744b5f584403a6a3504d7e">max_encoder_value</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classMotorControl.html#ab0c172ca680c38bdc09e96573c178056">  245</a></span>&#160;    uint16_t <a class="code" href="classMotorControl.html#ab0c172ca680c38bdc09e96573c178056">encoder_turn_threshold</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="classMotorControl.html#a68c931e287edfbfbe35c6960c56211b8">innerMotorTurnCompleted</a>(uint16_t _previous_encoder_value, uint16_t _new_encoder_value);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classMotorControl.html#ad5835dafd2647ea5e3350d09a9e19f71">sendMessage</a>(CAN_message_t _can_message);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="classMotorControl.html#a516790cba17293dee49a920d736b09b2">readMessage</a>(CAN_message_t &amp;_can_message);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// TODO Remove</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">void</span> errorMessage();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;};</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassMotorControl_html_a3d447b2ebd86ee5f49444afebdabdf6f"><div class="ttname"><a href="classMotorControl.html#a3d447b2ebd86ee5f49444afebdabdf6f">MotorControl::temperature</a></div><div class="ttdeci">double temperature</div><div class="ttdoc">Latest measured temperature of the motor in degree Celsius.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:214</div></div>
<div class="ttc" id="aclassMotorControl_html_a6396658604728af128c5b7565f8ec2ae"><div class="ttname"><a href="classMotorControl.html#a6396658604728af128c5b7565f8ec2ae">MotorControl::torque</a></div><div class="ttdeci">double torque</div><div class="ttdoc">Latest measured shaft torque in Nm.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:211</div></div>
<div class="ttc" id="aclassMotorControl_html_a2cddfc70767cf167aae07b334e51c724"><div class="ttname"><a href="classMotorControl.html#a2cddfc70767cf167aae07b334e51c724">MotorControl::multi_turn_angle_001lsb</a></div><div class="ttdeci">int64_t multi_turn_angle_001lsb</div><div class="ttdoc">This is the 64 bit representation of the raw int64_t multi turn angle in 0.01 degrees.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:191</div></div>
<div class="ttc" id="aclassMotorControl_html_afcc84762a4744b5f584403a6a3504d7e"><div class="ttname"><a href="classMotorControl.html#afcc84762a4744b5f584403a6a3504d7e">MotorControl::max_encoder_value</a></div><div class="ttdeci">uint16_t max_encoder_value</div><div class="ttdoc">The 16 bit encoder measures the position of the inner DC motor, not the shaft.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:241</div></div>
<div class="ttc" id="aclassMotorControl_html_a09cfe7f082888628e7b51d0111f238bc"><div class="ttname"><a href="classMotorControl.html#a09cfe7f082888628e7b51d0111f238bc">MotorControl::getTorque</a></div><div class="ttdeci">double getTorque()</div><div class="ttdoc">Return the torque of the MotorClass object.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:113</div></div>
<div class="ttc" id="aclassMotorControl_html_a2aa2f8082ecae25915cbe2e555ebd31b"><div class="ttname"><a href="classMotorControl.html#a2aa2f8082ecae25915cbe2e555ebd31b">MotorControl::readMotorStatus</a></div><div class="ttdeci">bool readMotorStatus()</div><div class="ttdoc">A request is sent to the motor asking it to send back its state. The private state varibles position,...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:423</div></div>
<div class="ttc" id="aclassMotorControl_html_af53ad784bf80625139c387b3ccd0ff10"><div class="ttname"><a href="classMotorControl.html#af53ad784bf80625139c387b3ccd0ff10">MotorControl::kp_pos</a></div><div class="ttdeci">double kp_pos</div><div class="ttdoc">Motor PID Parameters.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:162</div></div>
<div class="ttc" id="aclassMotorControl_html_adadf296d7e829eae4990f3c940c12223"><div class="ttname"><a href="classMotorControl.html#adadf296d7e829eae4990f3c940c12223">MotorControl::printState</a></div><div class="ttdeci">void printState()</div><div class="ttdoc">The ID, encoder value, multi turn angle, position, speed and torque of the motor are printed.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:547</div></div>
<div class="ttc" id="aclassMotorControl_html_a9da1555bc82e0dc764d0007330f2e14f"><div class="ttname"><a href="classMotorControl.html#a9da1555bc82e0dc764d0007330f2e14f">MotorControl::position</a></div><div class="ttdeci">double position</div><div class="ttdoc">Latest measured position of the shaft in radians.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:205</div></div>
<div class="ttc" id="aclassMotorControl_html_adbf876096b52138e3d4d2cd3f5a2c719"><div class="ttname"><a href="classMotorControl.html#adbf876096b52138e3d4d2cd3f5a2c719">MotorControl::readMultiTurnAngle</a></div><div class="ttdeci">bool readMultiTurnAngle()</div><div class="ttdoc">The multi turn angle of the motor updated.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:358</div></div>
<div class="ttc" id="aclassMotorControl_html_a311a925139985e93eb2f846beafaeb8b"><div class="ttname"><a href="classMotorControl.html#a311a925139985e93eb2f846beafaeb8b">MotorControl::previous_encoder_value</a></div><div class="ttdeci">uint16_t previous_encoder_value</div><div class="ttdoc">Keep track of previous encoder position. This way you can detect turns. See innerMotorTurnCompleted()...</div><div class="ttdef"><b>Definition:</b> motor_driver.h:179</div></div>
<div class="ttc" id="aclassMotorControl_html_a63731c651017af16698e47ba486d08e9"><div class="ttname"><a href="classMotorControl.html#a63731c651017af16698e47ba486d08e9">MotorControl::readPIDParameters</a></div><div class="ttdeci">bool readPIDParameters()</div><div class="ttdoc">Read the motor PI parameters and update the private PI values.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:75</div></div>
<div class="ttc" id="aclassMotorControl_html_a3da82ed2c8591aefb2f9a5ac2f2d3fca"><div class="ttname"><a href="classMotorControl.html#a3da82ed2c8591aefb2f9a5ac2f2d3fca">MotorControl::getPosition</a></div><div class="ttdeci">double getPosition()</div><div class="ttdoc">Return the position of the MotorClass object.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:105</div></div>
<div class="ttc" id="aclassMotorControl_html_a51f8529942ac9d799b3283209e8bc8c4"><div class="ttname"><a href="classMotorControl.html#a51f8529942ac9d799b3283209e8bc8c4">MotorControl::getVelocity</a></div><div class="ttdeci">double getVelocity()</div><div class="ttdoc">Return the velocity of the MotorClass object.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:109</div></div>
<div class="ttc" id="aclassMotorControl_html_a56ef29cfa725b1ceebd63722f67cc94f"><div class="ttname"><a href="classMotorControl.html#a56ef29cfa725b1ceebd63722f67cc94f">MotorControl::MotorControl</a></div><div class="ttdeci">MotorControl()</div><div class="ttdoc">Default constructor needed for initializing array.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:17</div></div>
<div class="ttc" id="aclassMotorControl_html_a936a278d8cd0b63eb97c50427188e685"><div class="ttname"><a href="classMotorControl.html#a936a278d8cd0b63eb97c50427188e685">MotorControl::multi_turn_angle_32_bit_001lsb</a></div><div class="ttdeci">int32_t multi_turn_angle_32_bit_001lsb</div><div class="ttdoc">This variable contains the 32 bit representation of the raw 0.01 degree multi turn angle.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:185</div></div>
<div class="ttc" id="aclassMotorControl_html_a88d6ab604e8aceb0aad702ebed96cb7a"><div class="ttname"><a href="classMotorControl.html#a88d6ab604e8aceb0aad702ebed96cb7a">MotorControl::requestMotorStatus</a></div><div class="ttdeci">void requestMotorStatus()</div><div class="ttdoc">A request is sent to the motor asking it to send back its state, position, velocity,...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:467</div></div>
<div class="ttc" id="aclassMotorControl_html_a41853f47391578f88397c82f476c201b"><div class="ttname"><a href="classMotorControl.html#a41853f47391578f88397c82f476c201b">MotorControl::number_of_inner_motor_rotations</a></div><div class="ttdeci">double number_of_inner_motor_rotations</div><div class="ttdoc">Number of rotations of the built-in motor, not the output-shaft.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:175</div></div>
<div class="ttc" id="aclassMotorControl_html_a1c0295d88d6a8815f2f9ce6f5e6cbd38"><div class="ttname"><a href="classMotorControl.html#a1c0295d88d6a8815f2f9ce6f5e6cbd38">MotorControl::stopMotor</a></div><div class="ttdeci">bool stopMotor()</div><div class="ttdoc">The motor stops exerting a control output. The motor will remain idle until a new control command or ...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:278</div></div>
<div class="ttc" id="aclassMotorControl_html"><div class="ttname"><a href="classMotorControl.html">MotorControl</a></div><div class="ttdef"><b>Definition:</b> motor_driver.h:13</div></div>
<div class="ttc" id="aclassMotorControl_html_a6a3b6d27d44ed6f218caa621f0a952ef"><div class="ttname"><a href="classMotorControl.html#a6a3b6d27d44ed6f218caa621f0a952ef">MotorControl::getMultiTurnAngle</a></div><div class="ttdeci">double getMultiTurnAngle()</div><div class="ttdoc">Return the latest received multi turn angle from the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:121</div></div>
<div class="ttc" id="aclassMotorControl_html_ab0c172ca680c38bdc09e96573c178056"><div class="ttname"><a href="classMotorControl.html#ab0c172ca680c38bdc09e96573c178056">MotorControl::encoder_turn_threshold</a></div><div class="ttdeci">uint16_t encoder_turn_threshold</div><div class="ttdoc">If the change in encoder value is larger than this it is safe to assume that the inner motor complete...</div><div class="ttdef"><b>Definition:</b> motor_driver.h:245</div></div>
<div class="ttc" id="aclassMotorControl_html_a68c931e287edfbfbe35c6960c56211b8"><div class="ttname"><a href="classMotorControl.html#a68c931e287edfbfbe35c6960c56211b8">MotorControl::innerMotorTurnCompleted</a></div><div class="ttdeci">double innerMotorTurnCompleted(uint16_t _previous_encoder_value, uint16_t _new_encoder_value)</div><div class="ttdoc">This function checks if the inner motor completed a turn. Depending on the difference between the new...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:582</div></div>
<div class="ttc" id="aclassMotorControl_html_ad5835dafd2647ea5e3350d09a9e19f71"><div class="ttname"><a href="classMotorControl.html#ad5835dafd2647ea5e3350d09a9e19f71">MotorControl::sendMessage</a></div><div class="ttdeci">void sendMessage(CAN_message_t _can_message)</div><div class="ttdoc">This function ensures that the message is sent to the correct CAN port.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:601</div></div>
<div class="ttc" id="aclassMotorControl_html_a4c7b6656a49ee1a9234774f940c732f1"><div class="ttname"><a href="classMotorControl.html#a4c7b6656a49ee1a9234774f940c732f1">MotorControl::readMotorControlCommandReply</a></div><div class="ttdeci">void readMotorControlCommandReply(unsigned char *_can_message)</div><div class="ttdoc">The state variables position, velocity, and torque are updated based on the latest information from t...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:247</div></div>
<div class="ttc" id="aclassMotorControl_html_abd056f19e63f8d8a3371c301158a8f73"><div class="ttname"><a href="classMotorControl.html#abd056f19e63f8d8a3371c301158a8f73">MotorControl::received_can_message</a></div><div class="ttdeci">CAN_message_t received_can_message</div><div class="ttdoc">CAN message object used to receive incomming CAN messages.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:227</div></div>
<div class="ttc" id="aclassMotorControl_html_a516790cba17293dee49a920d736b09b2"><div class="ttname"><a href="classMotorControl.html#a516790cba17293dee49a920d736b09b2">MotorControl::readMessage</a></div><div class="ttdeci">int readMessage(CAN_message_t &amp;_can_message)</div><div class="ttdoc">This function ensures that the message on the correct CAN port is read.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:622</div></div>
<div class="ttc" id="aclassMotorControl_html_a08463c3ab6e6212260dbb33e67b4865b"><div class="ttname"><a href="classMotorControl.html#a08463c3ab6e6212260dbb33e67b4865b">MotorControl::setSpeedReference</a></div><div class="ttdeci">void setSpeedReference(double _speed)</div><div class="ttdoc">Set the desired motor speed.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:205</div></div>
<div class="ttc" id="aclassMotorControl_html_ab7e8ee7dac639918e2e6474a3dffbcfe"><div class="ttname"><a href="classMotorControl.html#ab7e8ee7dac639918e2e6474a3dffbcfe">MotorControl::readCompleteEncoderPosition</a></div><div class="ttdeci">bool readCompleteEncoderPosition()</div><div class="ttdoc">All the encoder data from the motor is read and printed. This includes the encoder value,...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:476</div></div>
<div class="ttc" id="aclassMotorControl_html_a4557833d4596993cdbec55f211b2b812"><div class="ttname"><a href="classMotorControl.html#a4557833d4596993cdbec55f211b2b812">MotorControl::setTorqueCurrent</a></div><div class="ttdeci">void setTorqueCurrent(int _torque_current)</div><div class="ttdoc">Set the desired motor torque current. Scales linearly with torque.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:562</div></div>
<div class="ttc" id="aclassMotorControl_html_a5b5f94cd2aea557488360b839ce01f8e"><div class="ttname"><a href="classMotorControl.html#a5b5f94cd2aea557488360b839ce01f8e">MotorControl::max_torque_current</a></div><div class="ttdeci">int max_torque_current</div><div class="ttdoc">All torque values are scaled to the interval [-max_torque_current, max_torque_current].</div><div class="ttdef"><b>Definition:</b> motor_driver.h:237</div></div>
<div class="ttc" id="aclassMotorControl_html_adb120e50c64bba7173d2f564c4b4c385"><div class="ttname"><a href="classMotorControl.html#adb120e50c64bba7173d2f564c4b4c385">MotorControl::setTorqueReference</a></div><div class="ttdeci">void setTorqueReference(double _torque)</div><div class="ttdoc">Set the desired motor torque.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:220</div></div>
<div class="ttc" id="aclassMotorControl_html_a2633c618cd6b5caa204108b5b94dc4a0"><div class="ttname"><a href="classMotorControl.html#a2633c618cd6b5caa204108b5b94dc4a0">MotorControl::printPIDParameters</a></div><div class="ttdeci">void printPIDParameters()</div><div class="ttdoc">The function prints the PI parameters of the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:534</div></div>
<div class="ttc" id="aclassMotorControl_html_aad902c2afe2cc8dc4392c1842ef6034e"><div class="ttname"><a href="classMotorControl.html#aad902c2afe2cc8dc4392c1842ef6034e">MotorControl::position_offset</a></div><div class="ttdeci">double position_offset</div><div class="ttdoc">position offset = true position - position</div><div class="ttdef"><b>Definition:</b> motor_driver.h:199</div></div>
<div class="ttc" id="aclassMotorControl_html_ab3de59f6f96640c0e3cd08b5bd596734"><div class="ttname"><a href="classMotorControl.html#ab3de59f6f96640c0e3cd08b5bd596734">MotorControl::multi_turn_angle_64_bit</a></div><div class="ttdeci">int64_t multi_turn_angle_64_bit</div><div class="ttdoc">This is the true 64 bit representation of the multi turn angle in degrees.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:188</div></div>
<div class="ttc" id="aclassMotorControl_html_a65ff777ee56a7ace4cea498b36385a0c"><div class="ttname"><a href="classMotorControl.html#a65ff777ee56a7ace4cea498b36385a0c">MotorControl::position_center_offset</a></div><div class="ttdeci">double position_center_offset</div><div class="ttdoc">This is used to center the output shaft zero position.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:202</div></div>
<div class="ttc" id="aclassMotorControl_html_a13f483eb3198db500e17fd3225cbf30c"><div class="ttname"><a href="classMotorControl.html#a13f483eb3198db500e17fd3225cbf30c">MotorControl::turnOffMotor</a></div><div class="ttdeci">bool turnOffMotor()</div><div class="ttdoc">The motor stops exerting a control output. The motor's operating state and previously received contro...</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:318</div></div>
<div class="ttc" id="aclassMotorControl_html_a7583db8b9d31d9598b7163cce2e906a4"><div class="ttname"><a href="classMotorControl.html#a7583db8b9d31d9598b7163cce2e906a4">MotorControl::writePIDParametersToRAM</a></div><div class="ttdeci">bool writePIDParametersToRAM(double _kp_pos, double _ki_pos, double _kp_speed, double _ki_speed, double _kp_torque, double _ki_torque)</div><div class="ttdoc">Set the motor PI parameters and store them temporary in RAM.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:125</div></div>
<div class="ttc" id="aclassMotorControl_html_a8efb1d05019a36428d8d357a9b011271"><div class="ttname"><a href="classMotorControl.html#a8efb1d05019a36428d8d357a9b011271">MotorControl::getPIDParameters</a></div><div class="ttdeci">void getPIDParameters(double &amp;_kp_pos, double &amp;_ki_pos, double &amp;_kp_speed, double &amp;_ki_speed, double &amp;_kp_torque, double &amp;_ki_torque)</div><div class="ttdoc">The input parameters are updated to match the PI parameters of the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:518</div></div>
<div class="ttc" id="aclassMotorControl_html_a3e3595d03a4b8c3dba2ba4e5f94d6144"><div class="ttname"><a href="classMotorControl.html#a3e3595d03a4b8c3dba2ba4e5f94d6144">MotorControl::target_position_offset</a></div><div class="ttdeci">double target_position_offset</div><div class="ttdoc">If the motor is initialized in certain positions the setPosition function will have zero offset of 60...</div><div class="ttdef"><b>Definition:</b> motor_driver.h:196</div></div>
<div class="ttc" id="aclassMotorControl_html_a2125bf85610e5642c9b96cf6ecb7e9ad"><div class="ttname"><a href="classMotorControl.html#a2125bf85610e5642c9b96cf6ecb7e9ad">MotorControl::address</a></div><div class="ttdeci">uint16_t address</div><div class="ttdoc">Motor address = ID + 0x140. Declared for convenience.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:156</div></div>
<div class="ttc" id="aclassMotorControl_html_a05a3cfe598ada9c9c45d8cbdedfd6612"><div class="ttname"><a href="classMotorControl.html#a05a3cfe598ada9c9c45d8cbdedfd6612">MotorControl::initial_number_of_inner_motor_rotations</a></div><div class="ttdeci">double initial_number_of_inner_motor_rotations</div><div class="ttdoc">Number of rotations of the inner motor during startup This is needed to create position commands.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:171</div></div>
<div class="ttc" id="aclassMotorControl_html_a962aad2e5369e531efd9c4c78a127d38"><div class="ttname"><a href="classMotorControl.html#a962aad2e5369e531efd9c4c78a127d38">MotorControl::get_id</a></div><div class="ttdeci">uint8_t get_id()</div><div class="ttdoc">Return the ID of the MotorClass object.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:101</div></div>
<div class="ttc" id="aclassMotorControl_html_acfa6eac860b643239260c19b59f4a153"><div class="ttname"><a href="classMotorControl.html#acfa6eac860b643239260c19b59f4a153">MotorControl::setPositionReference</a></div><div class="ttdeci">void setPositionReference(double _angle)</div><div class="ttdoc">Set the desired multi turn motor angle.</div><div class="ttdef"><b>Definition:</b> motor_driver.cpp:190</div></div>
<div class="ttc" id="aclassMotorControl_html_a1f03efb175fcd3bbf8e21d7083f09c5b"><div class="ttname"><a href="classMotorControl.html#a1f03efb175fcd3bbf8e21d7083f09c5b">MotorControl::max_torque</a></div><div class="ttdeci">double max_torque</div><div class="ttdoc">The torque in Newton meter has to lie in the interval [-max_torque, max_torque].</div><div class="ttdef"><b>Definition:</b> motor_driver.h:233</div></div>
<div class="ttc" id="aclassMotorControl_html_a116a0c4dfb6303eb3707965137bf820a"><div class="ttname"><a href="classMotorControl.html#a116a0c4dfb6303eb3707965137bf820a">MotorControl::torque_current_measured</a></div><div class="ttdeci">int16_t torque_current_measured</div><div class="ttdoc">The measured torque current of the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:220</div></div>
<div class="ttc" id="aclassMotorControl_html_a75730853edf97afa2d2abd864311241e"><div class="ttname"><a href="classMotorControl.html#a75730853edf97afa2d2abd864311241e">MotorControl::speed</a></div><div class="ttdeci">double speed</div><div class="ttdoc">Latest measured speed of the shaft in radians/second.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:208</div></div>
<div class="ttc" id="aclassMotorControl_html_a20f66502c3c3f2cf48ab0a747dc4757c"><div class="ttname"><a href="classMotorControl.html#a20f66502c3c3f2cf48ab0a747dc4757c">MotorControl::getMultiTurnAngleRaw</a></div><div class="ttdeci">double getMultiTurnAngleRaw()</div><div class="ttdoc">Return the raw int64_t 0.01 degree multi turn angle.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:124</div></div>
<div class="ttc" id="aclassMotorControl_html_aecfb789964ebaef009a70f6822d4b06a"><div class="ttname"><a href="classMotorControl.html#aecfb789964ebaef009a70f6822d4b06a">MotorControl::multi_turn_angle_32_bit</a></div><div class="ttdeci">int32_t multi_turn_angle_32_bit</div><div class="ttdoc">This variable contains the multi turn angle read by the motor in degrees.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:182</div></div>
<div class="ttc" id="aclassMotorControl_html_a220532d2dcb7e358243fb4012dd93d34"><div class="ttname"><a href="classMotorControl.html#a220532d2dcb7e358243fb4012dd93d34">MotorControl::can_message</a></div><div class="ttdeci">CAN_message_t can_message</div><div class="ttdoc">CAN message for this motor. Only buf field is set for every message sent.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:224</div></div>
<div class="ttc" id="aclassMotorControl_html_a474dd24a88e301185058d5bd00b6eabf"><div class="ttname"><a href="classMotorControl.html#a474dd24a88e301185058d5bd00b6eabf">MotorControl::can_port_id</a></div><div class="ttdeci">uint8_t can_port_id</div><div class="ttdoc">Used to decide which CAN port to use. Possible values {1, 2}.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:159</div></div>
<div class="ttc" id="aclassMotorControl_html_a51647c6042d70555a27f21041286f5ec"><div class="ttname"><a href="classMotorControl.html#a51647c6042d70555a27f21041286f5ec">MotorControl::id</a></div><div class="ttdeci">uint8_t id</div><div class="ttdoc">Motor ID set through the Serial configurator [1 - 32].</div><div class="ttdef"><b>Definition:</b> motor_driver.h:153</div></div>
<div class="ttc" id="aclassMotorControl_html_a5dcdf944c68fbe8dc880b33c791656bb"><div class="ttname"><a href="classMotorControl.html#a5dcdf944c68fbe8dc880b33c791656bb">MotorControl::torque_current_reference</a></div><div class="ttdeci">int16_t torque_current_reference</div><div class="ttdoc">The torque current reference set for the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:217</div></div>
<div class="ttc" id="aclassMotorControl_html_ab21093a91fa72b1efa8cdffdbc5728b6"><div class="ttname"><a href="classMotorControl.html#ab21093a91fa72b1efa8cdffdbc5728b6">MotorControl::getEncoderValue</a></div><div class="ttdeci">double getEncoderValue()</div><div class="ttdoc">Return the latest received encoder value from the motor.</div><div class="ttdef"><b>Definition:</b> motor_driver.h:117</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
