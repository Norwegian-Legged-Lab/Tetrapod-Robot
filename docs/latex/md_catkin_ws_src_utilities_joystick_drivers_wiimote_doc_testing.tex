\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md43}{}\doxysubsection{Python compatiblity test script}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md43}
After building the package the first thing one should run is the python test script

The script will look for compatible Wiimotes. The package is {\bfseries{not}} compatible with the newer Wiimotes. The compatible Wiimotes are the {\bfseries{Nintendo R\+V\+L-\/\+C\+N\+T-\/01}} and {\bfseries{Nintendo R\+V\+L-\/\+W\+B\+C-\/01}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ python wiimote/scripts/wiimote\_test.py}
\DoxyCodeLine{Looking for compatible devices}
\DoxyCodeLine{Incompatible controller:}
\DoxyCodeLine{ CC:FB:65:E6:62:1D -\/ Nintendo RVL-\/CNT-\/01-\/TR}
\DoxyCodeLine{Compatible controller:}
\DoxyCodeLine{ 00:17:AB:37:FF:5E -\/ Nintendo RVL-\/CNT-\/01}
\end{DoxyCode}


In the above example two wiimotes were deteced but only one is compatible with the wiimote package.

\DoxyHorRuler{0}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md45}{}\doxysubsection{Running the wiimote nodes}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md45}
The package consists of two primary nodes\+: $>$wiimote\+\_\+node wiimote\+\_\+node.\+py

The C++ implementation was design with focus on reduced resource consumption and is recommended over the python variant.

\DoxyHorRuler{0}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md47}{}\doxysubsubsection{Wiimote\+\_\+node}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md47}
Running the wiimote\+\_\+node is straight forward, ensure bluetooth is enabled on your machine and put the Wiimote in discoverable mode (press 1+2)


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ rosrun wiimote wiimote\_node}
\DoxyCodeLine{[ INFO] [1498662258.081403347]: * * * Pairing}
\DoxyCodeLine{[ INFO] [1498662258.081474540]: Allow all joy sticks to remain at center position until calibrated.}
\DoxyCodeLine{[ INFO] [1498662258.081506464]: Put Wiimote in discoverable mode now (press 1+2)...}
\DoxyCodeLine{[ INFO] [1498662258.081540133]: Timeout in about 5 seconds if not paired.}
\DoxyCodeLine{[ INFO] [1498662835.763122784]: Collecting additional calibration data; keep wiimote stationary...}
\DoxyCodeLine{[ INFO] [1498662836.780853688]: Wiimote is Paired}
\end{DoxyCode}


The wiimote is now paired and is publisihing to several different topics. Listing the Ros topics should yield something similar to\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ rostopic list}
\DoxyCodeLine{/imu/data}
\DoxyCodeLine{/imu/is\_calibrated}
\DoxyCodeLine{/joy}
\DoxyCodeLine{/joy/set\_feedback}
\DoxyCodeLine{/rosout}
\DoxyCodeLine{/rosout\_agg}
\DoxyCodeLine{/wiimote/state}
\end{DoxyCode}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md48}{}\doxyparagraph{Possible Errors}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md48}
$>$If the Wiimote fails to connect try pressing the red sync button on the back of the remote and run the node again. The script could also be timing out before it is able to find the Wiimote aswell. If this is suspected try running the node with the following parameters\+: \`{} \$ rosrun wiimote wiimote\+\_\+node \+\_\+pair\+\_\+timeout\+:=-\/1 \`{} $>$This will make the script search indefinitly until closed.

To see if the Wiimote is working properly echo the /wiimote/state topic 
\begin{DoxyCode}{0}
\DoxyCodeLine{\$rostopic echo /wiimote/state}
\DoxyCodeLine{-\/-\/-\/}
\DoxyCodeLine{header:}
\DoxyCodeLine{  seq: 485}
\DoxyCodeLine{  stamp:}
\DoxyCodeLine{    secs: 1498664301}
\DoxyCodeLine{    nsecs: 333370601}
\DoxyCodeLine{  frame\_id: ''}
\DoxyCodeLine{angular\_velocity\_zeroed:}
\DoxyCodeLine{  x: 0.0}
\DoxyCodeLine{  y: 0.0}
\DoxyCodeLine{  z: 0.0}
\DoxyCodeLine{angular\_velocity\_raw:}
\DoxyCodeLine{  x: 0.0}
\DoxyCodeLine{  y: 0.0}
\DoxyCodeLine{  z: 0.0}
\DoxyCodeLine{angular\_velocity\_covariance: [-\/1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]}
\DoxyCodeLine{linear\_acceleration\_zeroed:}
\DoxyCodeLine{  x: 1.63444166667}
\DoxyCodeLine{  y: 0.338160344828}
\DoxyCodeLine{  z: 9.80665}
\DoxyCodeLine{linear\_acceleration\_raw:}
\DoxyCodeLine{  x: 144.0}
\DoxyCodeLine{  y: 140.0}
\DoxyCodeLine{  z: 161.0}
\DoxyCodeLine{linear\_acceleration\_covariance: [0.0, 0.0, 0.0, 0.0, 0.7766074343434308, 0.0, 0.0, 0.0, 1.1203354696969712]}
\DoxyCodeLine{nunchuk\_acceleration\_zeroed:}
\DoxyCodeLine{  x: 0.0}
\DoxyCodeLine{  y: 0.0}
\DoxyCodeLine{  z: 0.0}
\DoxyCodeLine{nunchuk\_acceleration\_raw:}
\DoxyCodeLine{  x: 0.0}
\DoxyCodeLine{  y: 0.0}
\DoxyCodeLine{  z: 0.0}
\DoxyCodeLine{nunchuk\_joystick\_zeroed: [0.0, 0.0]}
\DoxyCodeLine{nunchuk\_joystick\_raw: [0.0, 0.0]}
\DoxyCodeLine{buttons: [False, False, False, False, False, False, False, False, False, False, False]}
\DoxyCodeLine{nunchuk\_buttons: [False, False]}
\DoxyCodeLine{LEDs: [False, False, False, False]}
\DoxyCodeLine{rumble: False}
\DoxyCodeLine{ir\_tracking:}
\DoxyCodeLine{  -\/}
\DoxyCodeLine{    x: -\/1.0}
\DoxyCodeLine{    y: -\/1.0}
\DoxyCodeLine{    ir\_size: -\/1}
\DoxyCodeLine{  -\/}
\DoxyCodeLine{    x: -\/1.0}
\DoxyCodeLine{    y: -\/1.0}
\DoxyCodeLine{    ir\_size: -\/1}
\DoxyCodeLine{  -\/}
\DoxyCodeLine{    x: -\/1.0}
\DoxyCodeLine{    y: -\/1.0}
\DoxyCodeLine{    ir\_size: -\/1}
\DoxyCodeLine{  -\/}
\DoxyCodeLine{    x: -\/1.0}
\DoxyCodeLine{    y: -\/1.0}
\DoxyCodeLine{    ir\_size: -\/1}
\DoxyCodeLine{raw\_battery: 155.0}
\DoxyCodeLine{percent\_battery: 74.5192337036}
\DoxyCodeLine{zeroing\_time:}
\DoxyCodeLine{  secs: 1498662949}
\DoxyCodeLine{  nsecs: 612081279}
\DoxyCodeLine{errors: 0}
\DoxyCodeLine{-\/-\/-\/}
\end{DoxyCode}


Test it out! Move the Wiimote and see the corresponding values change on the terminal.

\DoxyHorRuler{0}
 \hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md50}{}\doxysubsection{Wiimote\+\_\+node.\+py}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md50}
The process for the python variant is similar to the C++ version. Put the Wiimote in discoverable mode (press 1+2) and run the script.


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ rosrun wiimote wiimote\_node.py}
\DoxyCodeLine{Press buttons 1 and 2 together to pair (within 6 seconds).}
\DoxyCodeLine{    (If no blinking lights, press power button for \string~3 seconds.)}
\end{DoxyCode}


Echo the output onto the screen using the same {\ttfamily \$ rosparam echo /wiimote/state} used above.\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md51}{}\doxysubsection{Topics}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md51}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md52}{}\doxyparagraph{Subscribed topics}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md52}

\begin{DoxyItemize}
\item set\+\_\+feedback (sensor\+\_\+msgs/\+Joy\+Feedback\+Array) {\itshape Topic where R\+OS clients control the Wiimote\textquotesingle{}s leds and rumble (vibrator) facility.}
\end{DoxyItemize}\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md53}{}\doxyparagraph{Published Topics}\label{md_catkin_ws_src_utilities_joystick_drivers_wiimote_doc_testing_autotoc_md53}

\begin{DoxyItemize}
\item joy (joy/\+Joy)

{\itshape Topic on which Wiimote accelerometer, gyro, and button data are published. Axes are\+: linear Acceleration\+X/\+Y/Z, followed by angular velocity\+X/\+Y/Z (a.\+k.\+a. Roll, Pitch, Yaw, a.\+k.\+a. Phi, Theta, Psi). The values are corrected to be near zero at rest. For raw values, use the State message. The Wiimote buttons are reported in the same order as in the State message} ~\newline

\item imu/data (sensor\+\_\+msgs/\+Imu)

{\itshape Topic on which Wiimote gyro and accelerometer data are sent out.} ~\newline

\item wiimote/state (wiimote/\+State)

{\itshape Topic for comprehensive information about Wiimote state.} ~\newline

\item wiimote/nunchuk (joy/\+Joy)

{\itshape Topic on which data from an attached Nunchuk are sent out, including the joystick, accelerometer and button data. Axes are\+: \mbox{\hyperlink{classJoystick}{Joystick}} X/Y, Acceleration X/\+Y/Z. The buttons are Z then C. Note the spelling of the topic name does not include a \textquotesingle{}c\textquotesingle{}.} ~\newline

\item wiimote/classic (joy/\+Joy)

{\itshape Topic on which data for a Wiimote classic attachment are sent out (Untested by Willow Garage).} ~\newline

\item imu/is\+\_\+calibrated (std\+\_\+msgs/\+Bool)

{\itshape Latched topic for learning the most recent Wiimote calibration result.} ~\newline
 
\end{DoxyItemize}