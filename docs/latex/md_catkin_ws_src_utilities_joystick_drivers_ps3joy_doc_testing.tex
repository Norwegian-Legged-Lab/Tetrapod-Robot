\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md21}{}\doxysection{Pairing the ps3 controller via bluetooth}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md21}
If the controller is not paired to the bluetooth dongle connect the controller via usb

Enter the following commands\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sudo bash }
\DoxyCodeLine{rosrun ps3joy sixpair}
\end{DoxyCode}


The current bluetooth master address and setting master address should the same.


\begin{DoxyCode}{0}
\DoxyCodeLine{Current Bluetooth master: 00:15:83:ed:3f:21}
\DoxyCodeLine{Setting master bd\_addr to 00:15:83:ed:3f:21}
\end{DoxyCode}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md22}{}\doxysection{Running the ps3joy nodes}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md22}
The package should consists of the following nodes\+: ~\newline

\begin{DoxyItemize}
\item ps3joy.\+py
\item ps3joy\+\_\+node.\+py
\end{DoxyItemize}

Running ps3joy\+\_\+node.\+py will {\bfseries{require}} being root to run if the user does not have permissions to the hardware.

Enter the following commands in the terminal\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sudo bash }
\DoxyCodeLine{rosrun ps3joy ps3joy\_node.py}
\end{DoxyCode}


The following message should be diplayed aftwards\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{Waiting Connection. Disconnect your PS3 joystick from USB and press the pairing button.}
\end{DoxyCode}


If your joystick does not pair, open a new terminal and restart bluez by entering the following command\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sudo systemctl restart bluetooth }
\end{DoxyCode}


The terminal where ps3joy\+\_\+node.\+py was launched should display the following message\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{Connection is Activated. }
\end{DoxyCode}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md23}{}\doxysection{ps3joy Diagnostics test}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md23}
Open a new terminal and enter the following following command\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{rostopic list}
\end{DoxyCode}


You should see the following\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{/diagnostics}
\DoxyCodeLine{/joy/set\_feedback}
\DoxyCodeLine{/rosout}
\DoxyCodeLine{/rosout\_agg}
\end{DoxyCode}


Enter the following command to diagnose the current state of the joystick 
\begin{DoxyCode}{0}
\DoxyCodeLine{rostopic echo /diagnostics}
\end{DoxyCode}


You will see the charging state, battery percentage and, connection type in your terminal\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{header: }
\DoxyCodeLine{  seq: 1}
\DoxyCodeLine{  stamp: }
\DoxyCodeLine{    secs: 1498667204}
\DoxyCodeLine{    nsecs: 603754043}
\DoxyCodeLine{  frame\_id: ''}
\DoxyCodeLine{status: }
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Battery}
\DoxyCodeLine{    message: 100\% Charge}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Connection}
\DoxyCodeLine{    message: Bluetooth Connection}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Charging State}
\DoxyCodeLine{    message: Not Charging}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\end{DoxyCode}


If you plug in the usb cable both the connection type and charging state will change\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{header: }
\DoxyCodeLine{  seq: 8}
\DoxyCodeLine{  stamp: }
\DoxyCodeLine{    secs: 1498667507}
\DoxyCodeLine{    nsecs: 798973083}
\DoxyCodeLine{  frame\_id: ''}
\DoxyCodeLine{status: }
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Battery}
\DoxyCodeLine{    message: Charging}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Connection}
\DoxyCodeLine{    message: USB Connection}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\DoxyCodeLine{  -\/ }
\DoxyCodeLine{    level: 0}
\DoxyCodeLine{    name: Charging State}
\DoxyCodeLine{    message: Charging}
\DoxyCodeLine{    hardware\_id: ''}
\DoxyCodeLine{    values: []}
\end{DoxyCode}
\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md24}{}\doxysection{Confirming the ps3 joystick input}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md24}
Check to see if your joystick is recgonized by your computer. ~\newline



\begin{DoxyCode}{0}
\DoxyCodeLine{ls /dev/input/ }
\end{DoxyCode}


Tell the ps3joy node which device is the ps3 joystick 
\begin{DoxyCode}{0}
\DoxyCodeLine{rosparam set joy\_node/dev "dev/input/jsX"}
\end{DoxyCode}


X would be the number your device was given. you can now start the joy node\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{rosrun joy joy\_node }
\end{DoxyCode}


You should see something that looks like this\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{[ INFO] [1498673536.447541090]: Opened joystick: /dev/input/js0. deadzone\_: 0.050000.}
\end{DoxyCode}


Open a new terminal and use rostopic to observe the data from the controller. 
\begin{DoxyCode}{0}
\DoxyCodeLine{rostopic echo joy }
\end{DoxyCode}


You should see the input data dipslayed on your terminal.\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md25}{}\doxysection{Recharging the P\+S3 joystick}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md25}

\begin{DoxyEnumerate}
\item Have an available U\+SB port on a computer, and the computer must be on while the joystick is charging.
\item Connect the P\+S3 joystick to a computer using an A to mini-\/B U\+SB cable.
\item The L\+E\+Ds on the joystick should blink at about 1Hz to indicate the the joystick is charging.
\end{DoxyEnumerate}\hypertarget{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md26}{}\doxysection{Shutting down the ps3 joystick}\label{md_catkin_ws_src_utilities_joystick_drivers_ps3joy_doc_testing_autotoc_md26}
There are two ways to turn of the ps3 joystick ~\newline

\begin{DoxyEnumerate}
\item Press and hold the pairing button on the joystick for approximately 10 seconds
\item You can also also shut the controller down by killing the process of ps3joy\+\_\+node.\+py press Ctrl-\/c on your keyboard to kill the processes and the joystick will turn off as well. 
\end{DoxyEnumerate}