<?xml version="1.0"?>

<!--
Base to shoulder yaw:
dX = 151
dY = 185

Shoulder yaw to shoulder pitch:
dX = r1 = 127mm

Shoulder pitch to knee pitch:
dX = r2 = 302mm

Knee pitch to foot:
dX = r3 = 464.5mm (joint to foot center)
dX = 489.5mm (joint to tip)

-->

<!--Parameters
x_0 = 0.151
y_0 = 0.1
z_0 = 0.5


-->

<sdf version='1.7'>
    <model name="single_leg">
        <pose>0 0 0 0 0 0</pose>
        <static>false</static>

        <link name="base">
            <pose>0 0 0 0 0 0</pose>

            <!--We use some large inertial values to prevent the base from moving-->
            <inertial>
                <pose>0 0 0 0 0 0</pose>
                <mass>10000</mass>
                <inertia>
                <ixx>10000</ixx>
                <ixy>0</ixy>
                <ixz>0</ixz>
                <iyy>10000</iyy>
                <iyz>0.0</iyz>
                <izz>10000</izz>
                </inertia>
            </inertial>


            <visual name="base_ground">
                <pose>0 0 0.05 0 0 0</pose>
                <geometry>
                    <box>
                        <size>0.40 0.10 0.10</size>
                    </box>
                </geometry>
            </visual>
            <collision name="base_ground_collision">
                <pose>0 0 0.05 0 0 0</pose>
                <geometry>
                    <box>
                        <size>0.4 0.1 0.1</size>
                    </box>
                </geometry>
            </collision>

            <visual name="base_top">
                <pose>0 0 1.05 0 0 0</pose>
                <geometry>
                    <box>
                        <size>0.40 0.10 0.10</size>
                    </box>
                </geometry>
            </visual>

            <visual name="base_rail_1">
                <pose>0.1 0 0.5 0 0 0</pose>
                <geometry>
                    <cylinder>
                        <radius>0.01</radius>
                        <length>1.0</length>
                    </cylinder>
                </geometry>
            </visual>

            <visual name="base_rail_2">
                <pose>-0.1 0 0.5 0 0 0</pose>
                <geometry>
                    <cylinder>
                        <radius>0.01</radius>
                        <length>1.0</length>
                    </cylinder>
                </geometry>
            </visual>
        </link>

        <link name="sliding_base">
            <pose>0 0 0.5 0 0 0</pose>
            <inertial>
                <pose>0 0 0 0 0 0</pose>
                <mass>1.5</mass>
                <inertia>
                    <ixx>1</ixx>
                    <ixy>0</ixy>
                    <ixz>0</ixz>
                    <iyy>1</iyy>
                    <iyz>0.0</iyz>
                    <izz>1</izz>
                </inertia>
            </inertial>
            <visual name="sliding_base_visual">
                <pose>0 0 0 0 0 0</pose>
                <geometry>
                    <box>
                        <size>0.3 0.06 0.08</size>
                    </box>
                </geometry>
            </visual>
            <visual name="sliding_base_hip_mount_visual">
                <pose>0 0.07 0 0 0</pose>
                <geometry>
                    <box>
                        <size>0.1 0.14 0.075</size>
                    </box>
                </geometry>
            </visual>
        </link>

        <joint name="sliding_base_joint" type="prismatic">
        <!-- <joint name="sliding_base_joint" type="fixed"> -->
            <pose>0 0 0 0 0 0</pose>
            <parent>base</parent>
            <child>sliding_base</child>
            <axis>
                <xyz>0 0 1</xyz>
                <limit>
                    <lower>-0.36</lower>
                    <upper>0.46</upper>
                </limit>
            </axis>
        </joint>


        <link name="front_left_hip">
            <!-- let the pose of the link coincide with the joint position -->
            <!--
                x = x_0
                y = y_0
                z = z_0
                r = 0
                p = 0
                y = 0
            -->
            <pose>0 0.1 0.5 0 0 0</pose>

            <inertial>
                <!-- Position of front_left_hip CoM relative to joint position. Obtained from Solidworks-->
                <pose>0 0.0 0 0 0 0</pose>

                <mass>1.544</mass>
                <inertia>
                <ixx>0.00795729837</ixx>
                <ixy>-0.0093093434</ixy>
                <ixz>0.00043958529</ixz>
                <iyy>0.01464086909</iyy>
                <iyz>-0.00030149073</iyz>
                <izz>0.02080178339</izz>
                </inertia>
            </inertial>

            <visual name="front_left_hip_visual">
                <geometry>
                    <mesh>
                        <uri>model://single_leg_description/meshes/shoulder_left.dae</uri>
                    </mesh>  
                </geometry>
            </visual>

        </link>

        <joint name="front_left_hip_yaw" type="revolute">
            <!-- Use zero as joint and link position coincide-->
            <pose>0 0 0 0 0 0</pose> 

            <child>front_left_hip</child>
            <parent>sliding_base</parent>
            <axis>
                <xyz>0 0 1</xyz>
                <limit>
                    <lower>0</lower>
                    <upper>3.14</upper>
                    <effort>60</effort>
                    <velocity>1000</velocity>
                </limit>
            </axis>
        </joint>

        <link name="front_left_upper_leg">
            <!-- Let the pose of the link coincide with the hip pitch joint position -->
            <!--
                x = x_0 + r1
                y = y_0
                z = z_0 + d1
                r = -1.5708 (rotate the leg)
                p = 0
                y = 0
            -->
            <pose>0.127 0.1 0.5 -1.5708 0 0</pose>

            <collision name="front_left_upper_leg_collision">
                <!-- Add pose for collision-->
                <pose>0.151 0 0 0 1.5708 0</pose>
                <geometry>
                    <cylinder>
                        <radius>0.008</radius>
                        <length>0.302</length>
                    </cylinder>
                </geometry>
            </collision>
            <visual name="front_left_upper_leg">
                <pose>0 0 0 0 0 0</pose>
                <geometry>
                    <mesh>
                        <uri>model://single_leg_description/meshes/leg_upper.dae</uri>
                    </mesh>                    
                </geometry>
            </visual>
            <inertial>
                <!-- Position of upper_leg CoM relative to hip pitch joint position. Obtained from Solidworks-->
                <pose>0 0 0 0 0 0</pose>
                <mass>1.48294</mass>
                <inertia>
                    <ixx>0.00294737758</ixx>
                    <ixy>0.00046832442</ixy>
                    <ixz>-0.00000233327</ixz>
                    <iyy>0.01775106293</iyy>
                    <iyz>0.00000007464</iyz>
                    <izz>0.01643813398</izz>
                </inertia>
            </inertial>
        </link>

        <joint name="front_left_hip_pitch" type="revolute">
            <parent>front_left_hip</parent>
            <child>front_left_upper_leg</child>
            <!-- Use zero as joint and link position coincide-->
            <pose frame="front_left_hip">0 0 0 0 0 0</pose>
            <axis>
                <xyz>0 0 1</xyz>
                <limit>
                    <lower>-2.5</lower>
                    <upper>2.5</upper>
                    <effort>60</effort>
                    <velocity>1000</velocity>
                </limit>
            </axis>
        </joint>

        <link name="front_left_lower_leg">
            <!-- Let the pose of the link coincide with the knee pitch joint position -->
            <!--
                x = x_0 + r1 + r2
                y = y_0
                z = z_0 + d1
                r = -1.5708
                p = 0
                y = 0
            -->
            <pose>0.429 0.1 0.5 -1.5708 0 0</pose>
            <visual name="front_left_lower_leg_visual">
                <pose>0 0 0 0 0 0</pose>
                <geometry>
                    <mesh>
                        <uri>model://single_leg_description/meshes/leg_lower.dae</uri>
                    </mesh>
                </geometry>
            </visual>
            <collision name="front_left_lower_leg_collision">
                <!-- Add pose for collision-->
                <pose>0.23225 0 0 0 1.5708 0</pose>
                <geometry>
                    <cylinder>
                        <radius>0.008</radius>
                        <length>0.4645</length>
                    </cylinder>
                </geometry>
            </collision>
            <collision name="front_left_knee_collision">
                <geometry>
                    <cylinder>
                        <radius>0.035</radius>
                        <length>0.06</length>
                    </cylinder>
                </geometry>
            </collision>
            <inertial>
                <!-- Position of lower_leg CoM relative to knee pitch joint position. Obtained from Solidworks-->
                <pose>0 0 0 0 0 0</pose>
                <mass>0.33748</mass>
                <inertia>
                    <ixx>0.00006153887</ixx>
                    <ixy>0.00000001054</ixy>
                    <ixz>0.00005544422</ixz>
                    <iyy>0.00174716381</iyy>
                    <iyz>0.00000000167</iyz>
                    <izz>0.01748405834</izz>
                </inertia>
            </inertial>
        </link>

        <joint name="front_left_knee_joint" type="revolute">
            <parent>front_left_upper_leg</parent>
            <child>front_left_lower_leg</child>
            <pose>0 0 0 0 0 0</pose>
            <axis>
                <xyz>0 0 1</xyz>
                <limit>
                    <lower>-2.5</lower>
                    <upper>2.5</upper>
                    <effort>60</effort>
                    <velocity>1000</velocity>
                </limit>
            </axis> 
        </joint>

        <link name="front_left_foot">
            <!-- Let the pose of the link coincide with the foot position -->
            <!--
                x = x_0 + r1 + r2 + r3
                y = y_0
                z = z_0 + d1
                r = 1.5708
                p = 0
                y = 0
            -->
            <pose>0.8935 0.1 0.5 1.5708 0 0</pose>

            <inertial>
                <pose>0 0 0 0 0 0</pose>
                <mass>0.1</mass>
                <inertia>
                    <ixx>0.01</ixx>
                    <ixy>0</ixy>
                    <ixz>0</ixz>
                    <iyy>0.01</iyy>
                    <iyz>0.0</iyz>
                    <izz>0.01</izz>
                </inertia>
            </inertial>
            <collision name="front_left_foot_collision">
                <geometry>
                    <sphere>
                        <radius>0.025</radius>
                    </sphere>
                </geometry>
                <surface>
                    <friction>
                        <ode>
                            <mu>1.0</mu>
                            <mu2>1.0</mu2>
                        </ode>
                    </friction>
                </surface>
            </collision>
        </link>

        <joint name="front_left_foot_joint" type="fixed">
            <parent>front_left_lower_leg</parent>
            <child>front_left_foot</child>
            <pose>0 0 0 0 0 0</pose>
        </joint>
    </model>
</sdf>